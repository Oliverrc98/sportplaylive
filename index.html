<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>SportPlay TV</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link rel="icon" href="img/windows_media_player.png" type="image/png">
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">

<style>
body { font-family: 'Roboto', Arial, sans-serif; background: #111; color: #fff; text-align: center; margin:0; padding:0; }
header { background: linear-gradient(90deg,#0ea5a4,#3b82f6); padding:15px; font-size:24px; font-weight:bold; display:flex; justify-content:center; align-items:center; gap:10px;}
header img { width:36px; height:36px; }

.channel-list { display:flex; flex-wrap:wrap; justify-content:center; padding:15px; }
.channel { background:#333; margin:8px; padding:12px; border-radius:12px; width:200px; cursor:pointer; transition:0.3s; font-weight:700; display:flex; align-items:center; justify-content:center;}
.channel:hover { background:#444; transform:translateY(-2px);}
.channel.active { outline:2px solid rgba(14,165,164,0.4); background:#0ea5a4; color:#021025;}

.player-wrap { max-width:900px; margin:20px auto; display:flex; flex-direction:column; gap:10px; align-items:center; }
.player-frame { width:100%; height:400px; border-radius:10px; overflow:hidden; background:#000; position:relative;}
.player-frame iframe { width:100%; height:100%; border:0; }

.btn { background:#0ea5a4; color:#021025; padding:8px 14px; border-radius:8px; cursor:pointer; border:none; font-weight:700; margin:4px;}
.btn:hover { opacity:0.9; transform:translateY(-1px);}
.btn.secondary { background:transparent; border:1px solid rgba(255,255,255,0.06); color:#cbd5e1;}

/* Turbo flash */
.turbo-flash {
  position:absolute;
  inset:0;
  pointer-events:none;
  border-radius:10px;
  background: linear-gradient(120deg, #0ea5a4, #3b82f6, #22d3ee);
  animation:flashGradient 0.6s ease-out;
  overflow:hidden;
}
@keyframes flashGradient {0%{opacity:0; transform:scale(1);}30%{opacity:0.7; transform:scale(1.05);}60%{opacity:0.5; transform:scale(1.08);}100%{opacity:0; transform:scale(1);}}

@media(max-width:600px){ .channel{width:90%;} .player-frame{height:250px;} }
</style>
</head>
<body>

<header>
<img src="img/windows_media_player.png" alt="Logo">
SportPlay TV
</header>

<div class="channel-list" id="channelList"></div>

<div class="player-wrap">
<div class="player-frame" id="playerFrame">
<iframe id="player" src="" allowfullscreen referrerpolicy="no-referrer"></iframe>
</div>

<div>
<button id="sdBtn" class="btn secondary">SD</button>
<button id="hdBtn" class="btn">HD</button>
<button id="fsBtn" class="btn">Pantalla completa</button>
</div>
</div>

<script>
let currentChannel = null;
const iframe = document.getElementById('player');
const playerFrame = document.getElementById('playerFrame');
const sdBtn = document.getElementById('sdBtn');
const hdBtn = document.getElementById('hdBtn');
const fsBtn = document.getElementById('fsBtn');

async function loadChannels() {
    const response = await fetch('channels.json');
    const channels = await response.json();
    const list = document.getElementById('channelList');

    channels.forEach((ch, index) => {
        const div = document.createElement('div');
        div.className = 'channel';
        div.textContent = ch.name;
        div.onclick = () => activateChannel(ch, div);
        list.appendChild(div);

        if(index === 0) activateChannel(ch, div);
    });
}

function activateChannel(ch, div){
    document.querySelectorAll('.channel').forEach(c=>c.classList.remove('active'));
    div.classList.add('active');
    currentChannel = ch;

    // Elegir HD/SD segÃºn velocidad
    const fastConnection = navigator.connection && navigator.connection.downlink >= 5;
    iframe.src = fastConnection ? ch.streams.hd : ch.streams.sd;

    // Turbo flash
    const flash = document.createElement('div');
    flash.className = 'turbo-flash';
    playerFrame.appendChild(flash);
    setTimeout(()=>flash.remove(),600);
}

sdBtn.onclick = () => { if(currentChannel) iframe.src = currentChannel.streams.sd; };
hdBtn.onclick = () => { if(currentChannel) iframe.src = currentChannel.streams.hd; };
fsBtn.onclick = () => { 
    if(iframe.requestFullscreen) iframe.requestFullscreen(); 
    else if(iframe.webkitRequestFullscreen) iframe.webkitRequestFullscreen(); 
};

loadChannels();
</script>

</body>
</html>
